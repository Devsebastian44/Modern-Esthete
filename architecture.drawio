<mxfile host="app.diagrams.net">
  <diagram id="modern-esthete-arch" name="Modern Esthete Architecture">
    <mxGraphModel dx="1000" dy="800" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        
        <!-- User Browser -->
        <mxCell id="user" value="User / Browser" style="shape=actor;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#000000;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="40" y="340" width="40" height="60" as="geometry" />
        </mxCell>
        
        <!-- Next.js Server Container -->
        <mxCell id="nextjs" value="Next.js Server (Vercel)" style="swimlane;whiteSpace=wrap;html=1;startSize=23;fillColor=none;strokeColor=#000000;strokeWidth=2;dashed=0;" vertex="1" parent="1">
          <mxGeometry x="160" y="180" width="320" height="380" as="geometry" />
        </mxCell>
        
        <!-- Pages -->
        <mxCell id="pages" value="Pages / UI (src/app)&#xa;/shop, /cart, /account" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#000000;strokeWidth=1;" vertex="1" parent="nextjs">
          <mxGeometry x="40" y="60" width="240" height="60" as="geometry" />
        </mxCell>
        
        <!-- Auth.js -->
        <mxCell id="auth" value="Auth.js (NextAuth)&#xa;Credentials / JWT" style="shape=note;whiteSpace=wrap;html=1;backgroundOutline=1;darkOpacity=0.05;fillColor=#fff2cc;strokeColor=#d6b656;strokeWidth=1;" vertex="1" parent="nextjs">
          <mxGeometry x="40" y="160" width="120" height="80" as="geometry" />
        </mxCell>
        
        <!-- API Routes -->
        <mxCell id="api" value="API Routes&#xa;/api/products, /api/auth" style="shape=hexagon;perimeter=hexagonPerimeter2;whiteSpace=wrap;html=1;fixedSize=1;fillColor=#f5f5f5;fontColor=#333333;strokeColor=#666666;" vertex="1" parent="nextjs">
          <mxGeometry x="170" y="160" width="120" height="80" as="geometry" />
        </mxCell>
        
        <!-- Prisma Client -->
        <mxCell id="prisma" value="Prisma Client&#xa;(Database ORM)" style="shape=parallelogram;perimeter=parallelogramPerimeter;whiteSpace=wrap;html=1;fixedSize=1;fillColor=#ffffff;strokeColor=#000000;strokeWidth=2;" vertex="1" parent="nextjs">
          <mxGeometry x="40" y="280" width="240" height="60" as="geometry" />
        </mxCell>
        
        <!-- Supabase Container -->
        <mxCell id="supabase" value="Supabase (PostgreSQL)" style="swimlane;whiteSpace=wrap;html=1;startSize=23;fillColor=none;strokeColor=#000000;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="560" y="200" width="220" height="340" as="geometry" />
        </mxCell>
        
        <!-- RLS Shield -->
        <mxCell id="rls" value="&lt;b&gt;RLS Security Layer&lt;/b&gt;&#xa;(security_policies.sql)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#e1f5fe;strokeColor=#01579b;strokeWidth=2;dashed=1;" vertex="1" parent="supabase">
          <mxGeometry x="20" y="50" width="180" height="60" as="geometry" />
        </mxCell>
        
        <!-- Database Cylinder -->
        <mxCell id="db" value="PostgreSQL Engine" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;fillColor=#ffffff;strokeColor=#000000;" vertex="1" parent="supabase">
          <mxGeometry x="60" y="130" width="100" height="100" as="geometry" />
        </mxCell>
        
        <!-- Tables -->
        <mxCell id="tables" value="Tables:&#xa;User, Product, Order" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f8f9fa;strokeColor=#000000;" vertex="1" parent="supabase">
          <mxGeometry x="20" y="250" width="180" height="60" as="geometry" />
        </mxCell>
        
        <!-- Connections -->
        <mxCell id="edge1" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;strokeWidth=2;" edge="1" parent="1" source="user" target="pages">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="edge2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;strokeWidth=1;" edge="1" parent="1" source="pages" target="prisma">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="edge3" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;strokeWidth=1;" edge="1" parent="nextjs" source="api" target="prisma">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="edge4" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;strokeWidth=3;strokeColor=#3399FF;" edge="1" parent="1" source="prisma" target="rls">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="edge5" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="supabase" source="rls" target="db">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="edge6" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="supabase" source="db" target="tables">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
